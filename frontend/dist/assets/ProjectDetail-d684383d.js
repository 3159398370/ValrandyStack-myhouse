import{m as r,a as c,n as o}from"./index-010a87de.js";const n={name:"ProjectDetail",data(){return{categoryColors:{1:"#42b983",2:"#3498db",3:"#9b59b6",4:"#e74c3c",5:"#f39c12"},lightboxOpen:!1,currentImageIndex:0}},computed:{...r("projects",["project","projects","categories","loading","error"]),projectId(){return parseInt(this.$route.params.id,10)},relatedProjects(){return!this.project||!this.projects.length?[]:this.projects.filter(s=>s.category===this.project.category&&s.id!==this.project.id).slice(0,3)},prevProject(){if(!this.project||!this.projects.length)return null;const s=this.projects.findIndex(t=>t.id===this.project.id);return s<=0?null:this.projects[s-1]},nextProject(){if(!this.project||!this.projects.length)return null;const s=this.projects.findIndex(t=>t.id===this.project.id);return s===-1||s===this.projects.length-1?null:this.projects[s+1]}},created(){this.loadProjectData()},methods:{...c("projects",["fetchProject","fetchProjects","fetchCategories"]),async loadProjectData(){try{this.projects.length===0&&await this.fetchProjects(),this.categories.length===0&&await this.fetchCategories(),await this.fetchProject(this.projectId)}catch(s){console.error("Failed to load project data:",s)}},getCategoryName(s){const t=this.categories.find(e=>e.id===s);return t?t.name:"未分类"},getCategoryColor(s){return this.categoryColors[s]||"#6c757d"},formatDate(s){return new Date(s).toLocaleDateString("zh-CN",{year:"numeric",month:"long",day:"numeric"})},getEmbedUrl(s){if(s.includes("youtube.com")||s.includes("youtu.be")){let t="";if(s.includes("youtube.com/watch")?t=new URLSearchParams(new URL(s).search).get("v"):s.includes("youtu.be/")&&(t=s.split("youtu.be/")[1].split("?")[0]),t)return`https://www.youtube.com/embed/${t}`}if(s.includes("vimeo.com")){const t=s.split("vimeo.com/")[1].split("?")[0];if(t)return`https://player.vimeo.com/video/${t}`}if(s.includes("bilibili.com")){let t="";if(s.includes("video/"))return t=s.split("video/")[1].split("?")[0],`https://player.bilibili.com/player.html?bvid=${t}&high_quality=1&danmaku=0`}return s},openLightbox(s){this.currentImageIndex=s,this.lightboxOpen=!0,document.body.style.overflow="hidden"},closeLightbox(){this.lightboxOpen=!1,document.body.style.overflow=""},prevImage(){this.currentImageIndex>0?this.currentImageIndex--:this.currentImageIndex=this.project.images.length-1},nextImage(){this.currentImageIndex<this.project.images.length-1?this.currentImageIndex++:this.currentImageIndex=0}},watch:{"$route.params.id"(){this.loadProjectData(),window.scrollTo(0,0)}},beforeDestroy(){this.lightboxOpen&&(document.body.style.overflow="")}};var l=function(){var t=this,e=t._self._c;return e("div",{staticClass:"project-detail"},[t.loading?e("div",{staticClass:"loading"},[e("div",{staticClass:"spinner"}),e("p",[t._v("加载中...")])]):t.error?e("div",{staticClass:"error"},[e("i",{staticClass:"fas fa-exclamation-circle"}),e("h3",[t._v("加载失败")]),e("p",[t._v(t._s(t.error))]),e("router-link",{staticClass:"btn btn-primary",attrs:{to:"/projects"}},[t._v("返回项目列表")])],1):t.project?e("div",{staticClass:"project-content"},[e("div",{staticClass:"project-header",style:{backgroundImage:`url(${t.project.banner_image})`}},[e("div",{staticClass:"overlay"}),e("div",{staticClass:"container"},[e("div",{staticClass:"project-header-content"},[e("div",{staticClass:"project-category",style:{backgroundColor:t.getCategoryColor(t.project.category)}},[t._v(" "+t._s(t.getCategoryName(t.project.category))+" ")]),e("h1",{staticClass:"project-title"},[t._v(t._s(t.project.title))]),e("p",{staticClass:"project-description"},[t._v(t._s(t.project.short_description))]),e("div",{staticClass:"project-meta"},[e("div",{staticClass:"meta-item"},[e("i",{staticClass:"far fa-calendar-alt"}),e("span",[t._v(t._s(t.formatDate(t.project.created_at)))])]),t.project.client?e("div",{staticClass:"meta-item"},[e("i",{staticClass:"far fa-building"}),e("span",[t._v(t._s(t.project.client))])]):t._e(),t.project.duration?e("div",{staticClass:"meta-item"},[e("i",{staticClass:"far fa-clock"}),e("span",[t._v(t._s(t.project.duration))])]):t._e()]),e("div",{staticClass:"project-actions"},[t.project.demo_url?e("a",{staticClass:"btn btn-primary",attrs:{href:t.project.demo_url,target:"_blank",rel:"noopener noreferrer"}},[e("i",{staticClass:"fas fa-external-link-alt"}),t._v(" 在线演示 ")]):t._e(),t.project.github_url?e("a",{staticClass:"btn btn-secondary",attrs:{href:t.project.github_url,target:"_blank",rel:"noopener noreferrer"}},[e("i",{staticClass:"fab fa-github"}),t._v(" 查看源码 ")]):t._e()])])])]),e("div",{staticClass:"container"},[e("div",{staticClass:"project-body"},[e("section",{staticClass:"project-section"},[e("h2",{staticClass:"section-title"},[t._v("项目概览")]),e("div",{staticClass:"project-overview"},[e("div",{staticClass:"overview-text"},[e("div",{domProps:{innerHTML:t._s(t.project.description)}})]),e("div",{staticClass:"overview-details"},[e("div",{staticClass:"detail-card"},[e("h3",[t._v("技术栈")]),e("div",{staticClass:"tags-list"},t._l(t.project.tags,function(a,i){return e("span",{key:i,staticClass:"tag"},[t._v(t._s(a))])}),0)]),t.project.features&&t.project.features.length>0?e("div",{staticClass:"detail-card"},[e("h3",[t._v("主要功能")]),e("ul",{staticClass:"features-list"},t._l(t.project.features,function(a,i){return e("li",{key:i},[t._v(" "+t._s(a)+" ")])}),0)]):t._e(),t.project.challenges&&t.project.challenges.length>0?e("div",{staticClass:"detail-card"},[e("h3",[t._v("项目挑战")]),e("ul",{staticClass:"challenges-list"},t._l(t.project.challenges,function(a,i){return e("li",{key:i},[t._v(" "+t._s(a)+" ")])}),0)]):t._e()])])]),t.project.images&&t.project.images.length>0?e("section",{staticClass:"project-section"},[e("h2",{staticClass:"section-title"},[t._v("项目展示")]),e("div",{staticClass:"project-gallery"},t._l(t.project.images,function(a,i){return e("div",{key:i,staticClass:"gallery-item",on:{click:function(h){return t.openLightbox(i)}}},[e("img",{attrs:{src:a.thumbnail,alt:a.caption||`项目图片 ${i+1}`}}),a.caption?e("div",{staticClass:"gallery-caption"},[t._v(t._s(a.caption))]):t._e()])}),0)]):t._e(),t.project.video_url?e("section",{staticClass:"project-section"},[e("h2",{staticClass:"section-title"},[t._v("项目演示")]),e("div",{staticClass:"project-video"},[e("div",{staticClass:"video-container"},[e("iframe",{attrs:{src:t.getEmbedUrl(t.project.video_url),frameborder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowfullscreen:""}})])])]):t._e(),t.relatedProjects.length>0?e("section",{staticClass:"project-section"},[e("h2",{staticClass:"section-title"},[t._v("相关项目")]),e("div",{staticClass:"related-projects"},t._l(t.relatedProjects,function(a){return e("div",{key:a.id,staticClass:"related-project-card"},[e("div",{staticClass:"related-project-image"},[e("img",{attrs:{src:a.thumbnail,alt:a.title}})]),e("div",{staticClass:"related-project-info"},[e("h3",[t._v(t._s(a.title))]),e("p",[t._v(t._s(a.short_description))]),e("router-link",{staticClass:"btn btn-outline",attrs:{to:`/projects/${a.id}`}},[t._v(" 查看详情 ")])],1)])}),0)]):t._e()]),e("div",{staticClass:"project-navigation"},[t.prevProject?e("router-link",{staticClass:"nav-link prev-link",attrs:{to:`/projects/${t.prevProject.id}`}},[e("i",{staticClass:"fas fa-arrow-left"}),e("div",{staticClass:"nav-content"},[e("span",[t._v("上一个项目")]),e("h4",[t._v(t._s(t.prevProject.title))])])]):t._e(),e("router-link",{staticClass:"nav-link all-link",attrs:{to:"/projects"}},[e("i",{staticClass:"fas fa-th-large"}),e("span",[t._v("所有项目")])]),t.nextProject?e("router-link",{staticClass:"nav-link next-link",attrs:{to:`/projects/${t.nextProject.id}`}},[e("div",{staticClass:"nav-content"},[e("span",[t._v("下一个项目")]),e("h4",[t._v(t._s(t.nextProject.title))])]),e("i",{staticClass:"fas fa-arrow-right"})]):t._e()],1)])]):e("div",{staticClass:"not-found"},[e("i",{staticClass:"fas fa-search"}),e("h3",[t._v("项目未找到")]),e("p",[t._v("您请求的项目不存在或已被删除")]),e("router-link",{staticClass:"btn btn-primary",attrs:{to:"/projects"}},[t._v("返回项目列表")])],1),t.lightboxOpen?e("div",{staticClass:"lightbox",on:{click:t.closeLightbox}},[e("div",{staticClass:"lightbox-content",on:{click:function(a){a.stopPropagation()}}},[e("button",{staticClass:"lightbox-close",on:{click:t.closeLightbox}},[e("i",{staticClass:"fas fa-times"})]),t.project.images.length>1?e("button",{staticClass:"lightbox-prev",on:{click:function(a){return a.stopPropagation(),t.prevImage.apply(null,arguments)}}},[e("i",{staticClass:"fas fa-chevron-left"})]):t._e(),e("div",{staticClass:"lightbox-image-container"},[e("img",{attrs:{src:t.project.images[t.currentImageIndex].full,alt:t.project.images[t.currentImageIndex].caption||""}}),t.project.images[t.currentImageIndex].caption?e("div",{staticClass:"lightbox-caption"},[t._v(" "+t._s(t.project.images[t.currentImageIndex].caption)+" ")]):t._e()]),t.project.images.length>1?e("button",{staticClass:"lightbox-next",on:{click:function(a){return a.stopPropagation(),t.nextImage.apply(null,arguments)}}},[e("i",{staticClass:"fas fa-chevron-right"})]):t._e()])]):t._e()])},p=[],d=o(n,l,p,!1,null,"9097698c",null,null);const u=d.exports;export{u as default};
